 WaitForPromptType←{
     c←⍺
     type timeout←2↑⍵,(≢⍵)↓1 10
     c{
         i←(en←⊃¨⍺.Messages)⍳⊂'SetPromptType'
         (i=≢en)∧⍵<0:¯1
         i=≢en:⍺ ∇ ⍵-⎕DL 0.5
         m←i 1⊃⍺.Messages
         ⍺.Messages↓⍨←i+1
         m.type=type:m
         ⍺ ∇ ⍵-⎕DL 0.5
     }timeout
 }
